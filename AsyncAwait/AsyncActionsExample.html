<!-- Async operation -->

<!DOCTYPE html>

<html>

<head>

<style>

                :root{

                color: blue;

    }

    ::selection{

                color: white;

        background-color: purple;

    }

 

</style>

<script>

function setColor(element){

                console.log('Inside setColor method');

    setColorPromise(element.value)

    .then((color)=>{

                console.log(`Message ${color}`);

        //document.getElementById('btn').value=color;

        //document.getElementById('colorName').innerHTML = allColors[colorCode];

    })

    .catch((error)=>{

                console.log(`Error ${error}`);

    });

}

async function setColorPromise(value){

                console.log('Inside setColorPromise method');

    let allColors = ['red', 'blue', 'purple', 'orange', 'white', 'black'];

    takeSomeTimeAndSetColor(2, allColors)

    .then((code)=>{

                console.log('Inside then block' + code);

        return code;

    })

    .catch((error)=>{

                //console.log('Error returned as ' + JSON.stringify(error));

        console.log('Inside error block');

                                return 'error';

    });

}

 

async function takeSomeTimeAndSetColor(t, allColors){

                console.log('Inside takeSomeTimeAndSetColor method');

    setTimeout(()=>{

                console.log('Inside setTimeout method');

        let colorCode = Math.ceil(Math.random() * 100)%5;

        console.log('takeSomeTimeAndSetColor calculated color as ->' + allColors[colorCode]);

        document.getElementById('btn').value = allColors[colorCode];

        document.getElementById('colorName').innerHTML = allColors[colorCode];

        resolve (allColors[colorCode]);

    }, t*1000);

    return 'hey';

}

</script>

</head>

<body>

<div>

                <input type='button' value="Set color" id='btn' onclick="setColor(this)"/>

    Color is set as <span id='colorName'></span>

</div>

 

<p id='first'> First Paragraph <br>hey</br></p>

<p id='second'> Second Paragraph <br>hey hey</br></p>

<p id='third'> Third Paragraph <br>hey hey hey</br></p>

 

 

</body>

</html>
